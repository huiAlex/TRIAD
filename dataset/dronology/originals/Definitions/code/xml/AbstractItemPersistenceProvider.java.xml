<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="Java" filename="flatCode/AbstractItemPersistenceProvider.java" pos:tabs="8"><package pos:start="1:1" pos:end="1:51">package <name pos:start="1:9" pos:end="1:50"><name pos:start="1:9" pos:end="1:11">edu</name><operator pos:start="1:12" pos:end="1:12">.</operator><name pos:start="1:13" pos:end="1:14">nd</name><operator pos:start="1:15" pos:end="1:15">.</operator><name pos:start="1:16" pos:end="1:24">dronology</name><operator pos:start="1:25" pos:end="1:25">.</operator><name pos:start="1:26" pos:end="1:33">services</name><operator pos:start="1:34" pos:end="1:34">.</operator><name pos:start="1:35" pos:end="1:38">core</name><operator pos:start="1:39" pos:end="1:39">.</operator><name pos:start="1:40" pos:end="1:50">persistence</name></name>;</package>

<import pos:start="3:1" pos:end="4:1">import <name pos:start="3:8" pos:end="3:19"><name pos:start="3:8" pos:end="3:11">java</name><operator pos:start="3:12" pos:end="3:12">.</operator><name pos:start="3:13" pos:end="3:14">io</name><operator pos:start="3:15" pos:end="3:15">.</operator><name pos:start="3:16" pos:end="3:19">File</name></name>
;</import>
<import pos:start="5:1" pos:end="5:31">import <name pos:start="5:8" pos:end="5:30"><name pos:start="5:8" pos:end="5:11">java</name><operator pos:start="5:12" pos:end="5:12">.</operator><name pos:start="5:13" pos:end="5:14">io</name><operator pos:start="5:15" pos:end="5:15">.</operator><name pos:start="5:16" pos:end="5:30">FileInputStream</name></name>;</import>
<import pos:start="6:1" pos:end="6:37">import <name pos:start="6:8" pos:end="6:36"><name pos:start="6:8" pos:end="6:11">java</name><operator pos:start="6:12" pos:end="6:12">.</operator><name pos:start="6:13" pos:end="6:14">io</name><operator pos:start="6:15" pos:end="6:15">.</operator><name pos:start="6:16" pos:end="6:36">FileNotFoundException</name></name>;</import>
<import pos:start="7:1" pos:end="7:32">import <name pos:start="7:8" pos:end="7:31"><name pos:start="7:8" pos:end="7:11">java</name><operator pos:start="7:12" pos:end="7:12">.</operator><name pos:start="7:13" pos:end="7:14">io</name><operator pos:start="7:15" pos:end="7:15">.</operator><name pos:start="7:16" pos:end="7:31">FileOutputStream</name></name>;</import>
<import pos:start="8:1" pos:end="8:27">import <name pos:start="8:8" pos:end="8:26"><name pos:start="8:8" pos:end="8:11">java</name><operator pos:start="8:12" pos:end="8:12">.</operator><name pos:start="8:13" pos:end="8:14">io</name><operator pos:start="8:15" pos:end="8:15">.</operator><name pos:start="8:16" pos:end="8:26">IOException</name></name>;</import>
<import pos:start="9:1" pos:end="9:27">import <name pos:start="9:8" pos:end="9:26"><name pos:start="9:8" pos:end="9:11">java</name><operator pos:start="9:12" pos:end="9:12">.</operator><name pos:start="9:13" pos:end="9:14">io</name><operator pos:start="9:15" pos:end="9:15">.</operator><name pos:start="9:16" pos:end="9:26">InputStream</name></name>;</import>
<import pos:start="10:1" pos:end="10:28">import <name pos:start="10:8" pos:end="10:27"><name pos:start="10:8" pos:end="10:11">java</name><operator pos:start="10:12" pos:end="10:12">.</operator><name pos:start="10:13" pos:end="10:14">io</name><operator pos:start="10:15" pos:end="10:15">.</operator><name pos:start="10:16" pos:end="10:27">OutputStream</name></name>;</import>
<import pos:start="11:1" pos:end="11:20">import <name pos:start="11:8" pos:end="11:19"><name pos:start="11:8" pos:end="11:11">java</name><operator pos:start="11:12" pos:end="11:12">.</operator><name pos:start="11:13" pos:end="11:15">net</name><operator pos:start="11:16" pos:end="11:16">.</operator><name pos:start="11:17" pos:end="11:19">URL</name></name>;</import>

<import pos:start="13:1" pos:end="13:38">import <name pos:start="13:8" pos:end="13:37"><name pos:start="13:8" pos:end="13:10">edu</name><operator pos:start="13:11" pos:end="13:11">.</operator><name pos:start="13:12" pos:end="13:13">nd</name><operator pos:start="13:14" pos:end="13:14">.</operator><name pos:start="13:15" pos:end="13:23">dronology</name><operator pos:start="13:24" pos:end="13:24">.</operator><name pos:start="13:25" pos:end="13:28">util</name><operator pos:start="13:29" pos:end="13:29">.</operator><name pos:start="13:30" pos:end="13:37">NullUtil</name></name>;</import>
<import pos:start="14:1" pos:end="14:30">import <name pos:start="14:8" pos:end="14:29"><name pos:start="14:8" pos:end="14:10">net</name><operator pos:start="14:11" pos:end="14:11">.</operator><name pos:start="14:12" pos:end="14:13">mv</name><operator pos:start="14:14" pos:end="14:14">.</operator><name pos:start="14:15" pos:end="14:21">logging</name><operator pos:start="14:22" pos:end="14:22">.</operator><name pos:start="14:23" pos:end="14:29">ILogger</name></name>;</import>
<import pos:start="15:1" pos:end="15:37">import <name pos:start="15:8" pos:end="15:36"><name pos:start="15:8" pos:end="15:10">net</name><operator pos:start="15:11" pos:end="15:11">.</operator><name pos:start="15:12" pos:end="15:13">mv</name><operator pos:start="15:14" pos:end="15:14">.</operator><name pos:start="15:15" pos:end="15:21">logging</name><operator pos:start="15:22" pos:end="15:22">.</operator><name pos:start="15:23" pos:end="15:36">LoggerProvider</name></name>;</import>

<comment type="block" format="javadoc" pos:start="17:1" pos:end="25:3">/**
 * Abstract base class for all item factories.&lt;br&gt;
 * Provides methods for read/save of items
 * 
 * @author Michael Vierhauser
 * 
 * @param &lt;ITEM&gt;
 *          The interface of the persisted object
 */</comment>
<class pos:start="26:1" pos:end="163:1"><specifier pos:start="26:1" pos:end="26:6">public</specifier> <specifier pos:start="26:8" pos:end="26:15">abstract</specifier> class <name pos:start="26:23" pos:end="26:59"><name pos:start="26:23" pos:end="26:53">AbstractItemPersistenceProvider</name><parameter_list pos:start="26:54" pos:end="26:59">&lt;<parameter pos:start="26:55" pos:end="26:58"><name pos:start="26:55" pos:end="26:58">ITEM</name></parameter>&gt;</parameter_list></name> <block pos:start="26:61" pos:end="163:1">{

	<comment type="block" format="javadoc" pos:start="28:9" pos:end="30:11">/**
	 * The persistor
	 */</comment>
	<decl_stmt pos:start="31:9" pos:end="31:54"><decl pos:start="31:9" pos:end="31:53"><type pos:start="31:9" pos:end="31:43"><specifier pos:start="31:9" pos:end="31:17">protected</specifier> <name pos:start="31:19" pos:end="31:43"><name pos:start="31:19" pos:end="31:37">IPersistenceManager</name><argument_list type="generic" pos:start="31:38" pos:end="31:43">&lt;<argument pos:start="31:39" pos:end="31:42"><name pos:start="31:39" pos:end="31:42">ITEM</name></argument>&gt;</argument_list></name></type> <name pos:start="31:45" pos:end="31:53">PERSISTOR</name></decl>;</decl_stmt>
	<decl_stmt pos:start="32:9" pos:end="32:110"><decl pos:start="32:9" pos:end="32:109"><type pos:start="32:9" pos:end="32:36"><specifier pos:start="32:9" pos:end="32:15">private</specifier> <specifier pos:start="32:17" pos:end="32:22">static</specifier> <specifier pos:start="32:24" pos:end="32:28">final</specifier> <name pos:start="32:30" pos:end="32:36">ILogger</name></type> <name pos:start="32:38" pos:end="32:43">LOGGER</name> <init pos:start="32:45" pos:end="32:109">= <expr pos:start="32:47" pos:end="32:109"><call pos:start="32:47" pos:end="32:109"><name pos:start="32:47" pos:end="32:70"><name pos:start="32:47" pos:end="32:60">LoggerProvider</name><operator pos:start="32:61" pos:end="32:61">.</operator><name pos:start="32:62" pos:end="32:70">getLogger</name></name><argument_list pos:start="32:71" pos:end="32:109">(<argument pos:start="32:72" pos:end="32:108"><expr pos:start="32:72" pos:end="32:108"><name pos:start="32:72" pos:end="32:108"><name pos:start="32:72" pos:end="32:102">AbstractItemPersistenceProvider</name><operator pos:start="32:103" pos:end="32:103">.</operator><name pos:start="32:104" pos:end="32:108">class</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

	<comment type="block" format="javadoc" pos:start="34:9" pos:end="36:11">/**
	 * Default constructor
	 */</comment>
	<constructor pos:start="37:9" pos:end="39:9"><specifier pos:start="37:9" pos:end="37:14">public</specifier> <name pos:start="37:16" pos:end="37:46">AbstractItemPersistenceProvider</name><parameter_list pos:start="37:47" pos:end="37:48">()</parameter_list> <block pos:start="37:50" pos:end="39:9">{<block_content pos:start="38:17" pos:end="38:32">
		<expr_stmt pos:start="38:17" pos:end="38:32"><expr pos:start="38:17" pos:end="38:31"><call pos:start="38:17" pos:end="38:31"><name pos:start="38:17" pos:end="38:29">initPersistor</name><argument_list pos:start="38:30" pos:end="38:31">()</argument_list></call></expr>;</expr_stmt>
	</block_content>}</block></constructor>

	<constructor pos:start="41:9" pos:end="43:9"><specifier pos:start="41:9" pos:end="41:14">public</specifier> <name pos:start="41:16" pos:end="41:46">AbstractItemPersistenceProvider</name><parameter_list pos:start="41:47" pos:end="41:59">(<parameter pos:start="41:48" pos:end="41:58"><decl pos:start="41:48" pos:end="41:58"><type pos:start="41:48" pos:end="41:53"><name pos:start="41:48" pos:end="41:53">String</name></type> <name pos:start="41:55" pos:end="41:58">type</name></decl></parameter>)</parameter_list> <block pos:start="41:61" pos:end="43:9">{<block_content pos:start="42:17" pos:end="42:36">
		<expr_stmt pos:start="42:17" pos:end="42:36"><expr pos:start="42:17" pos:end="42:35"><call pos:start="42:17" pos:end="42:35"><name pos:start="42:17" pos:end="42:29">initPersistor</name><argument_list pos:start="42:30" pos:end="42:35">(<argument pos:start="42:31" pos:end="42:34"><expr pos:start="42:31" pos:end="42:34"><name pos:start="42:31" pos:end="42:34">type</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
	</block_content>}</block></constructor>

	<comment type="block" format="javadoc" pos:start="45:9" pos:end="47:11">/**
	 * needs to be implemented in subclasses - initialized the used persistor
	 */</comment>
	<function_decl pos:start="48:9" pos:end="48:48"><type pos:start="48:9" pos:end="48:31"><specifier pos:start="48:9" pos:end="48:17">protected</specifier> <specifier pos:start="48:19" pos:end="48:26">abstract</specifier> <name pos:start="48:28" pos:end="48:31">void</name></type> <name pos:start="48:33" pos:end="48:45">initPersistor</name><parameter_list pos:start="48:46" pos:end="48:47">()</parameter_list>;</function_decl>
	
	<function_decl pos:start="50:9" pos:end="50:59"><type pos:start="50:9" pos:end="50:31"><specifier pos:start="50:9" pos:end="50:17">protected</specifier> <specifier pos:start="50:19" pos:end="50:26">abstract</specifier> <name pos:start="50:28" pos:end="50:31">void</name></type> <name pos:start="50:33" pos:end="50:45">initPersistor</name><parameter_list pos:start="50:46" pos:end="50:58">(<parameter pos:start="50:47" pos:end="50:57"><decl pos:start="50:47" pos:end="50:57"><type pos:start="50:47" pos:end="50:52"><name pos:start="50:47" pos:end="50:52">String</name></type> <name pos:start="50:54" pos:end="50:57">type</name></decl></parameter>)</parameter_list>;</function_decl>

	<comment type="block" format="javadoc" pos:start="52:9" pos:end="55:11">/**
	 * 
	 * @return a singleton instance of the persistor
	 */</comment>
	<function pos:start="56:9" pos:end="58:9"><type pos:start="56:9" pos:end="56:56"><specifier pos:start="56:9" pos:end="56:14">public</specifier> <specifier pos:start="56:16" pos:end="56:21">static</specifier> <name pos:start="56:23" pos:end="56:56"><name pos:start="56:23" pos:end="56:53">AbstractItemPersistenceProvider</name><argument_list type="generic" pos:start="56:54" pos:end="56:56">&lt;<argument pos:start="56:55" pos:end="56:55"><name pos:start="56:55" pos:end="56:55">?</name></argument>&gt;</argument_list></name></type> <name pos:start="56:58" pos:end="56:68">getInstance</name><parameter_list pos:start="56:69" pos:end="56:70">()</parameter_list> <block pos:start="56:72" pos:end="58:9">{<block_content pos:start="57:17" pos:end="57:28">
		<return pos:start="57:17" pos:end="57:28">return <expr pos:start="57:24" pos:end="57:27"><literal type="null" pos:start="57:24" pos:end="57:27">null</literal></expr>;</return>
	</block_content>}</block></function>

	<comment type="block" format="javadoc" pos:start="60:9" pos:end="66:11">/**
	 * Reads the item represented by resource
	 * 
	 * @param resource
	 * @return either the item represented by resource or an exception.
	 * @throws PersistenceException
	 */</comment>
	<function pos:start="67:9" pos:end="74:9"><type pos:start="67:9" pos:end="67:19"><specifier pos:start="67:9" pos:end="67:14">public</specifier> <name pos:start="67:16" pos:end="67:19">ITEM</name></type> <name pos:start="67:21" pos:end="67:28">loadItem</name><parameter_list pos:start="67:29" pos:end="67:42">(<parameter pos:start="67:30" pos:end="67:41"><decl pos:start="67:30" pos:end="67:41"><type pos:start="67:30" pos:end="67:32"><name pos:start="67:30" pos:end="67:32">URL</name></type> <name pos:start="67:34" pos:end="67:41">resource</name></decl></parameter>)</parameter_list> <throws pos:start="67:44" pos:end="67:70">throws <argument pos:start="67:51" pos:end="67:70"><expr pos:start="67:51" pos:end="67:70"><name pos:start="67:51" pos:end="67:70">PersistenceException</name></expr></argument></throws> <block pos:start="67:72" pos:end="74:9">{<block_content pos:start="68:17" pos:end="73:17">
		<expr_stmt pos:start="68:17" pos:end="68:45"><expr pos:start="68:17" pos:end="68:44"><call pos:start="68:17" pos:end="68:44"><name pos:start="68:17" pos:end="68:34"><name pos:start="68:17" pos:end="68:24">NullUtil</name><operator pos:start="68:25" pos:end="68:25">.</operator><name pos:start="68:26" pos:end="68:34">checkNull</name></name><argument_list pos:start="68:35" pos:end="68:44">(<argument pos:start="68:36" pos:end="68:43"><expr pos:start="68:36" pos:end="68:43"><name pos:start="68:36" pos:end="68:43">resource</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		<try pos:start="69:17" pos:end="73:17">try <block pos:start="69:21" pos:end="71:17">{<block_content pos:start="70:25" pos:end="70:63">
			<return pos:start="70:25" pos:end="70:63">return <expr pos:start="70:32" pos:end="70:62"><call pos:start="70:32" pos:end="70:62"><name pos:start="70:32" pos:end="70:39">loadItem</name><argument_list pos:start="70:40" pos:end="70:62">(<argument pos:start="70:41" pos:end="70:61"><expr pos:start="70:41" pos:end="70:61"><call pos:start="70:41" pos:end="70:61"><name pos:start="70:41" pos:end="70:59"><name pos:start="70:41" pos:end="70:48">resource</name><operator pos:start="70:49" pos:end="70:49">.</operator><name pos:start="70:50" pos:end="70:59">openStream</name></name><argument_list pos:start="70:60" pos:end="70:61">()</argument_list></call></expr></argument>)</argument_list></call></expr>;</return>
		</block_content>}</block> <catch pos:start="71:19" pos:end="73:17">catch <parameter_list pos:start="71:25" pos:end="71:39">(<parameter pos:start="71:26" pos:end="71:38"><decl pos:start="71:26" pos:end="71:38"><type pos:start="71:26" pos:end="71:38"><name pos:start="71:26" pos:end="71:36">IOException</name></type> <name pos:start="71:38" pos:end="71:38">e</name></decl></parameter>)</parameter_list> <block pos:start="71:41" pos:end="73:17">{<block_content pos:start="72:25" pos:end="72:58">
			<throw pos:start="72:25" pos:end="72:58">throw <expr pos:start="72:31" pos:end="72:57"><operator pos:start="72:31" pos:end="72:33">new</operator> <call pos:start="72:35" pos:end="72:57"><name pos:start="72:35" pos:end="72:54">PersistenceException</name><argument_list pos:start="72:55" pos:end="72:57">(<argument pos:start="72:56" pos:end="72:56"><expr pos:start="72:56" pos:end="72:56"><name pos:start="72:56" pos:end="72:56">e</name></expr></argument>)</argument_list></call></expr>;</throw>
		</block_content>}</block></catch></try>
	</block_content>}</block></function>

	<comment type="block" format="javadoc" pos:start="76:9" pos:end="82:11">/**
	 * Reads the item stored at the given path
	 * 
	 * @param path
	 * @return either the item located at the path or an exception.
	 * @throws PersistenceException
	 */</comment>
	<function pos:start="83:9" pos:end="87:9"><type pos:start="83:9" pos:end="83:19"><specifier pos:start="83:9" pos:end="83:14">public</specifier> <name pos:start="83:16" pos:end="83:19">ITEM</name></type> <name pos:start="83:21" pos:end="83:28">loadItem</name><parameter_list pos:start="83:29" pos:end="83:41">(<parameter pos:start="83:30" pos:end="83:40"><decl pos:start="83:30" pos:end="83:40"><type pos:start="83:30" pos:end="83:35"><name pos:start="83:30" pos:end="83:35">String</name></type> <name pos:start="83:37" pos:end="83:40">path</name></decl></parameter>)</parameter_list> <throws pos:start="83:43" pos:end="83:69">throws <argument pos:start="83:50" pos:end="83:69"><expr pos:start="83:50" pos:end="83:69"><name pos:start="83:50" pos:end="83:69">PersistenceException</name></expr></argument></throws> <block pos:start="83:71" pos:end="87:9">{<block_content pos:start="84:17" pos:end="86:35">
		<expr_stmt pos:start="84:17" pos:end="84:41"><expr pos:start="84:17" pos:end="84:40"><call pos:start="84:17" pos:end="84:40"><name pos:start="84:17" pos:end="84:34"><name pos:start="84:17" pos:end="84:24">NullUtil</name><operator pos:start="84:25" pos:end="84:25">.</operator><name pos:start="84:26" pos:end="84:34">checkNull</name></name><argument_list pos:start="84:35" pos:end="84:40">(<argument pos:start="84:36" pos:end="84:39"><expr pos:start="84:36" pos:end="84:39"><name pos:start="84:36" pos:end="84:39">path</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		<decl_stmt pos:start="85:17" pos:end="85:40"><decl pos:start="85:17" pos:end="85:39"><type pos:start="85:17" pos:end="85:20"><name pos:start="85:17" pos:end="85:20">File</name></type> <name pos:start="85:22" pos:end="85:22">f</name> <init pos:start="85:24" pos:end="85:39">= <expr pos:start="85:26" pos:end="85:39"><operator pos:start="85:26" pos:end="85:28">new</operator> <call pos:start="85:30" pos:end="85:39"><name pos:start="85:30" pos:end="85:33">File</name><argument_list pos:start="85:34" pos:end="85:39">(<argument pos:start="85:35" pos:end="85:38"><expr pos:start="85:35" pos:end="85:38"><name pos:start="85:35" pos:end="85:38">path</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
		<return pos:start="86:17" pos:end="86:35">return <expr pos:start="86:24" pos:end="86:34"><call pos:start="86:24" pos:end="86:34"><name pos:start="86:24" pos:end="86:31">loadItem</name><argument_list pos:start="86:32" pos:end="86:34">(<argument pos:start="86:33" pos:end="86:33"><expr pos:start="86:33" pos:end="86:33"><name pos:start="86:33" pos:end="86:33">f</name></expr></argument>)</argument_list></call></expr>;</return>
	</block_content>}</block></function>
	
	<function pos:start="89:9" pos:end="98:9"><type pos:start="89:9" pos:end="89:19"><specifier pos:start="89:9" pos:end="89:14">public</specifier> <name pos:start="89:16" pos:end="89:19">ITEM</name></type> <name pos:start="89:21" pos:end="89:28">loadItem</name><parameter_list pos:start="89:29" pos:end="89:39">(<parameter pos:start="89:30" pos:end="89:38"><decl pos:start="89:30" pos:end="89:38"><type pos:start="89:30" pos:end="89:33"><name pos:start="89:30" pos:end="89:33">File</name></type> <name pos:start="89:35" pos:end="89:38">file</name></decl></parameter>)</parameter_list><throws pos:start="89:40" pos:end="89:66">throws <argument pos:start="89:47" pos:end="89:66"><expr pos:start="89:47" pos:end="89:66"><name pos:start="89:47" pos:end="89:66">PersistenceException</name></expr></argument></throws> <block pos:start="89:68" pos:end="98:9">{<block_content pos:start="90:17" pos:end="97:37">
		<decl_stmt pos:start="90:17" pos:end="90:36"><decl pos:start="90:17" pos:end="90:35"><type pos:start="90:17" pos:end="90:31"><name pos:start="90:17" pos:end="90:31">FileInputStream</name></type> <name pos:start="90:33" pos:end="90:35">fin</name></decl>;</decl_stmt>

		<try pos:start="92:17" pos:end="96:17">try <block pos:start="92:21" pos:end="94:17">{<block_content pos:start="93:25" pos:end="93:56">
			<expr_stmt pos:start="93:25" pos:end="93:56"><expr pos:start="93:25" pos:end="93:55"><name pos:start="93:25" pos:end="93:27">fin</name> <operator pos:start="93:29" pos:end="93:29">=</operator> <operator pos:start="93:31" pos:end="93:33">new</operator> <call pos:start="93:35" pos:end="93:55"><name pos:start="93:35" pos:end="93:49">FileInputStream</name><argument_list pos:start="93:50" pos:end="93:55">(<argument pos:start="93:51" pos:end="93:54"><expr pos:start="93:51" pos:end="93:54"><name pos:start="93:51" pos:end="93:54">file</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		</block_content>}</block> <catch pos:start="94:19" pos:end="96:17">catch <parameter_list pos:start="94:25" pos:end="94:49">(<parameter pos:start="94:26" pos:end="94:48"><decl pos:start="94:26" pos:end="94:48"><type pos:start="94:26" pos:end="94:48"><name pos:start="94:26" pos:end="94:46">FileNotFoundException</name></type> <name pos:start="94:48" pos:end="94:48">e</name></decl></parameter>)</parameter_list> <block pos:start="94:51" pos:end="96:17">{<block_content pos:start="95:25" pos:end="95:58">
			<throw pos:start="95:25" pos:end="95:58">throw <expr pos:start="95:31" pos:end="95:57"><operator pos:start="95:31" pos:end="95:33">new</operator> <call pos:start="95:35" pos:end="95:57"><name pos:start="95:35" pos:end="95:54">PersistenceException</name><argument_list pos:start="95:55" pos:end="95:57">(<argument pos:start="95:56" pos:end="95:56"><expr pos:start="95:56" pos:end="95:56"><name pos:start="95:56" pos:end="95:56">e</name></expr></argument>)</argument_list></call></expr>;</throw>
		</block_content>}</block></catch></try>
		<return pos:start="97:17" pos:end="97:37">return <expr pos:start="97:24" pos:end="97:36"><call pos:start="97:24" pos:end="97:36"><name pos:start="97:24" pos:end="97:31">loadItem</name><argument_list pos:start="97:32" pos:end="97:36">(<argument pos:start="97:33" pos:end="97:35"><expr pos:start="97:33" pos:end="97:35"><name pos:start="97:33" pos:end="97:35">fin</name></expr></argument>)</argument_list></call></expr>;</return>
	</block_content>}</block></function>

	<comment type="block" format="javadoc" pos:start="100:9" pos:end="106:11">/**
	 * Reads the item represented by the content
	 * 
	 * @param content
	 * @return either the item located by the content or an exception.
	 * @throws PersistenceException
	 */</comment>
	<function pos:start="107:9" pos:end="124:9"><type pos:start="107:9" pos:end="107:19"><specifier pos:start="107:9" pos:end="107:14">public</specifier> <name pos:start="107:16" pos:end="107:19">ITEM</name></type> <name pos:start="107:21" pos:end="107:28">loadItem</name><parameter_list pos:start="107:29" pos:end="107:49">(<parameter pos:start="107:30" pos:end="107:48"><decl pos:start="107:30" pos:end="107:48"><type pos:start="107:30" pos:end="107:40"><name pos:start="107:30" pos:end="107:40">InputStream</name></type> <name pos:start="107:42" pos:end="107:48">content</name></decl></parameter>)</parameter_list> <throws pos:start="107:51" pos:end="107:77">throws <argument pos:start="107:58" pos:end="107:77"><expr pos:start="107:58" pos:end="107:77"><name pos:start="107:58" pos:end="107:77">PersistenceException</name></expr></argument></throws> <block pos:start="107:79" pos:end="124:9">{<block_content pos:start="108:17" pos:end="123:29">
		<expr_stmt pos:start="108:17" pos:end="108:44"><expr pos:start="108:17" pos:end="108:43"><call pos:start="108:17" pos:end="108:43"><name pos:start="108:17" pos:end="108:34"><name pos:start="108:17" pos:end="108:24">NullUtil</name><operator pos:start="108:25" pos:end="108:25">.</operator><name pos:start="108:26" pos:end="108:34">checkNull</name></name><argument_list pos:start="108:35" pos:end="108:43">(<argument pos:start="108:36" pos:end="108:42"><expr pos:start="108:36" pos:end="108:42"><name pos:start="108:36" pos:end="108:42">content</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		<decl_stmt pos:start="109:17" pos:end="109:34"><decl pos:start="109:17" pos:end="109:33"><type pos:start="109:17" pos:end="109:20"><name pos:start="109:17" pos:end="109:20">ITEM</name></type> <name pos:start="109:22" pos:end="109:26">model</name> <init pos:start="109:28" pos:end="109:33">= <expr pos:start="109:30" pos:end="109:33"><literal type="null" pos:start="109:30" pos:end="109:33">null</literal></expr></init></decl>;</decl_stmt>
		<try pos:start="110:17" pos:end="122:17">try <block pos:start="110:21" pos:end="112:17">{<block_content pos:start="111:25" pos:end="111:56">
			<expr_stmt pos:start="111:25" pos:end="111:56"><expr pos:start="111:25" pos:end="111:55"><name pos:start="111:25" pos:end="111:29">model</name> <operator pos:start="111:31" pos:end="111:31">=</operator> <call pos:start="111:33" pos:end="111:55"><name pos:start="111:33" pos:end="111:46"><name pos:start="111:33" pos:end="111:41">PERSISTOR</name><operator pos:start="111:42" pos:end="111:42">.</operator><name pos:start="111:43" pos:end="111:46">open</name></name><argument_list pos:start="111:47" pos:end="111:55">(<argument pos:start="111:48" pos:end="111:54"><expr pos:start="111:48" pos:end="111:54"><name pos:start="111:48" pos:end="111:54">content</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		</block_content>}</block> <catch pos:start="112:19" pos:end="114:17">catch <parameter_list pos:start="112:25" pos:end="112:37">(<parameter pos:start="112:26" pos:end="112:36"><decl pos:start="112:26" pos:end="112:36"><type pos:start="112:26" pos:end="112:36"><name pos:start="112:26" pos:end="112:34">Exception</name></type> <name pos:start="112:36" pos:end="112:36">e</name></decl></parameter>)</parameter_list> <block pos:start="112:39" pos:end="114:17">{<block_content pos:start="113:25" pos:end="113:58">
			<throw pos:start="113:25" pos:end="113:58">throw <expr pos:start="113:31" pos:end="113:57"><operator pos:start="113:31" pos:end="113:33">new</operator> <call pos:start="113:35" pos:end="113:57"><name pos:start="113:35" pos:end="113:54">PersistenceException</name><argument_list pos:start="113:55" pos:end="113:57">(<argument pos:start="113:56" pos:end="113:56"><expr pos:start="113:56" pos:end="113:56"><name pos:start="113:56" pos:end="113:56">e</name></expr></argument>)</argument_list></call></expr>;</throw>
		</block_content>}</block></catch> <finally pos:start="114:19" pos:end="122:17">finally <block pos:start="114:27" pos:end="122:17">{<block_content pos:start="115:25" pos:end="121:25">
			<try pos:start="115:25" pos:end="121:25">try <block pos:start="115:29" pos:end="119:25">{<block_content pos:start="116:33" pos:end="118:33">
				<if_stmt pos:start="116:33" pos:end="118:33"><if pos:start="116:33" pos:end="118:33">if <condition pos:start="116:36" pos:end="116:52">(<expr pos:start="116:37" pos:end="116:51"><name pos:start="116:37" pos:end="116:43">content</name> <operator pos:start="116:45" pos:end="116:46">!=</operator> <literal type="null" pos:start="116:48" pos:end="116:51">null</literal></expr>)</condition> <block pos:start="116:54" pos:end="118:33">{<block_content pos:start="117:41" pos:end="117:56">
					<expr_stmt pos:start="117:41" pos:end="117:56"><expr pos:start="117:41" pos:end="117:55"><call pos:start="117:41" pos:end="117:55"><name pos:start="117:41" pos:end="117:53"><name pos:start="117:41" pos:end="117:47">content</name><operator pos:start="117:48" pos:end="117:48">.</operator><name pos:start="117:49" pos:end="117:53">close</name></name><argument_list pos:start="117:54" pos:end="117:55">()</argument_list></call></expr>;</expr_stmt>
				</block_content>}</block></if></if_stmt>
			</block_content>}</block> <catch pos:start="119:27" pos:end="121:25">catch <parameter_list pos:start="119:33" pos:end="119:47">(<parameter pos:start="119:34" pos:end="119:46"><decl pos:start="119:34" pos:end="119:46"><type pos:start="119:34" pos:end="119:46"><name pos:start="119:34" pos:end="119:44">IOException</name></type> <name pos:start="119:46" pos:end="119:46">e</name></decl></parameter>)</parameter_list> <block pos:start="119:49" pos:end="121:25">{<block_content pos:start="120:33" pos:end="120:48">
				<expr_stmt pos:start="120:33" pos:end="120:48"><expr pos:start="120:33" pos:end="120:47"><call pos:start="120:33" pos:end="120:47"><name pos:start="120:33" pos:end="120:44"><name pos:start="120:33" pos:end="120:38">LOGGER</name><operator pos:start="120:39" pos:end="120:39">.</operator><name pos:start="120:40" pos:end="120:44">error</name></name><argument_list pos:start="120:45" pos:end="120:47">(<argument pos:start="120:46" pos:end="120:46"><expr pos:start="120:46" pos:end="120:46"><name pos:start="120:46" pos:end="120:46">e</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
			</block_content>}</block></catch></try>
		</block_content>}</block></finally></try>
		<return pos:start="123:17" pos:end="123:29">return <expr pos:start="123:24" pos:end="123:28"><name pos:start="123:24" pos:end="123:28">model</name></expr>;</return>
	</block_content>}</block></function>

	<comment type="block" format="javadoc" pos:start="126:9" pos:end="134:11">/**
	 * 
	 * @param model
	 *          The model object to save
	 * @param out
	 *          The ountput stream where to write the object.
	 * @return true if saving was successful.
	 * @throws PersistenceException
	 */</comment>
	<function pos:start="135:9" pos:end="139:9"><type pos:start="135:9" pos:end="135:22"><specifier pos:start="135:9" pos:end="135:14">public</specifier> <name pos:start="135:16" pos:end="135:22">boolean</name></type> <name pos:start="135:24" pos:end="135:31">saveItem</name><parameter_list pos:start="135:32" pos:end="135:61">(<parameter pos:start="135:33" pos:end="135:42"><decl pos:start="135:33" pos:end="135:42"><type pos:start="135:33" pos:end="135:42"><name pos:start="135:33" pos:end="135:36">ITEM</name></type> <name pos:start="135:38" pos:end="135:42">model</name></decl></parameter>, <parameter pos:start="135:45" pos:end="135:60"><decl pos:start="135:45" pos:end="135:60"><type pos:start="135:45" pos:end="135:60"><name pos:start="135:45" pos:end="135:56">OutputStream</name></type> <name pos:start="135:58" pos:end="135:60">out</name></decl></parameter>)</parameter_list> <throws pos:start="135:63" pos:end="135:89">throws <argument pos:start="135:70" pos:end="135:89"><expr pos:start="135:70" pos:end="135:89"><name pos:start="135:70" pos:end="135:89">PersistenceException</name></expr></argument></throws> <block pos:start="135:91" pos:end="139:9">{<block_content pos:start="136:17" pos:end="138:31">
		<expr_stmt pos:start="136:17" pos:end="136:47"><expr pos:start="136:17" pos:end="136:46"><call pos:start="136:17" pos:end="136:46"><name pos:start="136:17" pos:end="136:34"><name pos:start="136:17" pos:end="136:24">NullUtil</name><operator pos:start="136:25" pos:end="136:25">.</operator><name pos:start="136:26" pos:end="136:34">checkNull</name></name><argument_list pos:start="136:35" pos:end="136:46">(<argument pos:start="136:36" pos:end="136:40"><expr pos:start="136:36" pos:end="136:40"><name pos:start="136:36" pos:end="136:40">model</name></expr></argument>, <argument pos:start="136:43" pos:end="136:45"><expr pos:start="136:43" pos:end="136:45"><name pos:start="136:43" pos:end="136:45">out</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		<decl_stmt pos:start="137:17" pos:end="137:61"><decl pos:start="137:17" pos:end="137:60"><type pos:start="137:17" pos:end="137:23"><name pos:start="137:17" pos:end="137:23">boolean</name></type> <name pos:start="137:25" pos:end="137:31">success</name> <init pos:start="137:33" pos:end="137:60">= <expr pos:start="137:35" pos:end="137:60"><call pos:start="137:35" pos:end="137:60"><name pos:start="137:35" pos:end="137:48"><name pos:start="137:35" pos:end="137:43">PERSISTOR</name><operator pos:start="137:44" pos:end="137:44">.</operator><name pos:start="137:45" pos:end="137:48">save</name></name><argument_list pos:start="137:49" pos:end="137:60">(<argument pos:start="137:50" pos:end="137:54"><expr pos:start="137:50" pos:end="137:54"><name pos:start="137:50" pos:end="137:54">model</name></expr></argument>, <argument pos:start="137:57" pos:end="137:59"><expr pos:start="137:57" pos:end="137:59"><name pos:start="137:57" pos:end="137:59">out</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
		<return pos:start="138:17" pos:end="138:31">return <expr pos:start="138:24" pos:end="138:30"><name pos:start="138:24" pos:end="138:30">success</name></expr>;</return>
	</block_content>}</block></function>

	<comment type="block" format="javadoc" pos:start="141:9" pos:end="149:11">/**
	 * 
	 * @param item
	 *          The item object to save
	 * @param path
	 *          The path where to save the object.
	 * @return true if saving was successful.
	 * @throws PersistenceException
	 */</comment>
	<function pos:start="150:9" pos:end="161:9"><type pos:start="150:9" pos:end="150:22"><specifier pos:start="150:9" pos:end="150:14">public</specifier> <name pos:start="150:16" pos:end="150:22">boolean</name></type> <name pos:start="150:24" pos:end="150:31">saveItem</name><parameter_list pos:start="150:32" pos:end="150:55">(<parameter pos:start="150:33" pos:end="150:41"><decl pos:start="150:33" pos:end="150:41"><type pos:start="150:33" pos:end="150:41"><name pos:start="150:33" pos:end="150:36">ITEM</name></type> <name pos:start="150:38" pos:end="150:41">item</name></decl></parameter>, <parameter pos:start="150:44" pos:end="150:54"><decl pos:start="150:44" pos:end="150:54"><type pos:start="150:44" pos:end="150:54"><name pos:start="150:44" pos:end="150:49">String</name></type> <name pos:start="150:51" pos:end="150:54">path</name></decl></parameter>)</parameter_list> <throws pos:start="150:57" pos:end="150:83">throws <argument pos:start="150:64" pos:end="150:83"><expr pos:start="150:64" pos:end="150:83"><name pos:start="150:64" pos:end="150:83">PersistenceException</name></expr></argument></throws> <block pos:start="150:85" pos:end="161:9">{<block_content pos:start="151:17" pos:end="160:17">
		<expr_stmt pos:start="151:17" pos:end="151:47"><expr pos:start="151:17" pos:end="151:46"><call pos:start="151:17" pos:end="151:46"><name pos:start="151:17" pos:end="151:34"><name pos:start="151:17" pos:end="151:24">NullUtil</name><operator pos:start="151:25" pos:end="151:25">.</operator><name pos:start="151:26" pos:end="151:34">checkNull</name></name><argument_list pos:start="151:35" pos:end="151:46">(<argument pos:start="151:36" pos:end="151:39"><expr pos:start="151:36" pos:end="151:39"><name pos:start="151:36" pos:end="151:39">item</name></expr></argument>, <argument pos:start="151:42" pos:end="151:45"><expr pos:start="151:42" pos:end="151:45"><name pos:start="151:42" pos:end="151:45">path</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
		<decl_stmt pos:start="152:17" pos:end="152:43"><decl pos:start="152:17" pos:end="152:42"><type pos:start="152:17" pos:end="152:20"><name pos:start="152:17" pos:end="152:20">File</name></type> <name pos:start="152:22" pos:end="152:25">file</name> <init pos:start="152:27" pos:end="152:42">= <expr pos:start="152:29" pos:end="152:42"><operator pos:start="152:29" pos:end="152:31">new</operator> <call pos:start="152:33" pos:end="152:42"><name pos:start="152:33" pos:end="152:36">File</name><argument_list pos:start="152:37" pos:end="152:42">(<argument pos:start="152:38" pos:end="152:41"><expr pos:start="152:38" pos:end="152:41"><name pos:start="152:38" pos:end="152:41">path</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
		<decl_stmt pos:start="153:17" pos:end="153:38"><decl pos:start="153:17" pos:end="153:37"><type pos:start="153:17" pos:end="153:32"><name pos:start="153:17" pos:end="153:32">FileOutputStream</name></type> <name pos:start="153:34" pos:end="153:37">fout</name></decl>;</decl_stmt>
		<try pos:start="154:17" pos:end="160:17">try <block pos:start="154:21" pos:end="158:17">{<block_content pos:start="155:25" pos:end="157:39">
			<expr_stmt pos:start="155:25" pos:end="155:58"><expr pos:start="155:25" pos:end="155:57"><name pos:start="155:25" pos:end="155:28">fout</name> <operator pos:start="155:30" pos:end="155:30">=</operator> <operator pos:start="155:32" pos:end="155:34">new</operator> <call pos:start="155:36" pos:end="155:57"><name pos:start="155:36" pos:end="155:51">FileOutputStream</name><argument_list pos:start="155:52" pos:end="155:57">(<argument pos:start="155:53" pos:end="155:56"><expr pos:start="155:53" pos:end="155:56"><name pos:start="155:53" pos:end="155:56">file</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
			<decl_stmt pos:start="156:25" pos:end="156:63"><decl pos:start="156:25" pos:end="156:62"><type pos:start="156:25" pos:end="156:31"><name pos:start="156:25" pos:end="156:31">boolean</name></type> <name pos:start="156:33" pos:end="156:39">success</name> <init pos:start="156:41" pos:end="156:62">= <expr pos:start="156:43" pos:end="156:62"><call pos:start="156:43" pos:end="156:62"><name pos:start="156:43" pos:end="156:50">saveItem</name><argument_list pos:start="156:51" pos:end="156:62">(<argument pos:start="156:52" pos:end="156:55"><expr pos:start="156:52" pos:end="156:55"><name pos:start="156:52" pos:end="156:55">item</name></expr></argument>, <argument pos:start="156:58" pos:end="156:61"><expr pos:start="156:58" pos:end="156:61"><name pos:start="156:58" pos:end="156:61">fout</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
			<return pos:start="157:25" pos:end="157:39">return <expr pos:start="157:32" pos:end="157:38"><name pos:start="157:32" pos:end="157:38">success</name></expr>;</return>
		</block_content>}</block> <catch pos:start="158:19" pos:end="160:17">catch <parameter_list pos:start="158:25" pos:end="158:49">(<parameter pos:start="158:26" pos:end="158:48"><decl pos:start="158:26" pos:end="158:48"><type pos:start="158:26" pos:end="158:48"><name pos:start="158:26" pos:end="158:46">FileNotFoundException</name></type> <name pos:start="158:48" pos:end="158:48">e</name></decl></parameter>)</parameter_list> <block pos:start="158:51" pos:end="160:17">{<block_content pos:start="159:25" pos:end="159:58">
			<throw pos:start="159:25" pos:end="159:58">throw <expr pos:start="159:31" pos:end="159:57"><operator pos:start="159:31" pos:end="159:33">new</operator> <call pos:start="159:35" pos:end="159:57"><name pos:start="159:35" pos:end="159:54">PersistenceException</name><argument_list pos:start="159:55" pos:end="159:57">(<argument pos:start="159:56" pos:end="159:56"><expr pos:start="159:56" pos:end="159:56"><name pos:start="159:56" pos:end="159:56">e</name></expr></argument>)</argument_list></call></expr>;</throw>
		</block_content>}</block></catch></try>
	</block_content>}</block></function>

}</block></class>
</unit>
